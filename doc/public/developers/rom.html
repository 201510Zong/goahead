<!DOCTYPE html>
<html lang="en">
<head>
    <title>Serving from ROM</title>
    <!-- Copyright Embedthis Software, LLC, 2003-2014. All Rights Reserved. -->
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="keywords" content="goahead, embedded web server, embedded, devices, http server, internet of things, appweb" />
    <meta name="description" content="Simple, fast, secure embedded web server" />
    <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700|Open+Sans:300italic,400,300,700'
        rel='stylesheet' type='text/css'>
<!--
    <link href='http://fonts.googleapis.com/css?family=Audiowide' rel='stylesheet' type='text/css'>
-->
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One' rel='stylesheet' type='text/css'>
    <link href="../lib/semantic/css/semantic.css" rel="stylesheet" type="text/css" />
    <link href="../css/all.css" rel="stylesheet" type="text/css" />
    <link href="../images/favicon.ico" rel="shortcut icon" />

</head>
<body>
    

    <div class="ui inverted masthead">
         
        <div class="column">
            <div class="ui inverted menu">
                <div class="ui black small launch right attached toggle button">
                    <i class="icon list layout"></i>
                </div>
                <div class="right menu">
                     
                    <a class="item" href="https://embedthis.com/">Embedthis</a>
                    <a class="item" href="https://embedthis.com/appweb/">Appweb Site</a>
                    <a class="item" href="http://goo.gl/dGRDl4">Appweb News</a>
                    <a class="item" href="https://github.com/embedthis/appweb">Repository</a>
                    <a class="item" href="https://embedthis.com/blog/">Blog</a>
                    <a class="item" href="https://twitter.com/mobstream">Twitter</a>

                </div>
            </div>
            
            <div class="ui breadcrumb">
                <a class="section" href="../">Home</a>
                
                <div class="divider">/</div>
                <a class="section" href="index.html">
                    Developer's Guide
                </a>
                
                <div class="divider">/</div>
                <a class="active section" href="rom.html">Serving from ROM</a>
            </div>
            
            <div class="ui right floated basic segment version">
                v3.4.0
            </div>
        </div>

    </div>
    <div class="content">

            <h1>Serving Pages from ROM</h1>
            <p>To enable GoAhead to be used on embedded systems without file systems, GoAhead supports the compilation of
            web pages and configuration files into C code that can be stored in Read-Only-Memory (ROM) and fetched by
            GoAhead to respond to relevant requests.</p>
            <p>GoAhead has a virtual file system interface that allows the run-time switching between serving web pages
            on a disk-based file system and a compiled ROM based store of web pages.
            This ROM facility may also be used to enhance security by preventing the modification of web documents,
            or in performance critical situations were the serving of web pages from memory may be an effective
            optimization.</p>
            
            <a id="compilingWebPages"></a>
            <h2 >Compiling Web Pages</h2>
            <p>The GoAhead <b>webcomp</b> program is used to compile web documents, configuration files, and any other
            files that you would like to be compiled into C code. The webcomp program will parse the files and convert
            them into C data structures which can then be compiled by your C/C++ compiler and linked into your
            application.</p>
            <p>For example:</p>
            <pre class="ui code segment">
find web -print &gt;fileList
webcomp filelist &gt;romFiles.c
</pre>
            <p>This will create a list of all the web files and then convert these files into C structures in the file
            romFiles.cpp.</p>
            <p>The <b>webcomp</b> program takes one options:</p>
            <table title="Switches" class="width">
                <thead>
                    <tr>
                        <th>Switch</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>--prefix</td>
                        <td>Specifies a prefix to remove from each of the compiled file names.</td>
                    </tr>
                </tbody>
            </table>
            <p>It is important to include some essential GoAhead configuration files into the ROM. These include the
            GoAhead configuration file, the mime.types file, and any authorization database files. The following script
            is used to compile the web pages in three web directories ("sslWeb", "vhostWeb", and "web") and to also
            compile the essential configuration files. Note: the files should be relative paths without a "./" prefix.</p>
            <pre class="ui code segment">
find sslWeb vhostWeb web -print &gt;rom.files \
echo -e '.\ngoahead.conf\nmime.types\nusers.db\ngroups.db' &gt;&gt;rom.files
webcomp rom.files &gt;romFiles.c
</pre>

    </div>
    <div class="terms ui basic center aligned segment">
        <p>&copy; Embedthis Software, 2003-2014. All rights reserved.
            Generated on Sep  2, 2014.
        </p>
    </div>

    <script src="../lib/jquery/jquery.js"></script>
    <script src="../lib/semantic/javascript/query.js"></script>
    <script>
        $(function() {
            var url = '@@{top}@@{meta.url}';
            var active = $('.sidebar a[href="' + url +'"]');
            active.addClass('active');
            var sidebar = $(".sidebar");
            var height = sidebar.height();
            var offset = active.offset();
            if (offset && offset.top >= height) {
                var diff = height - active.offset().top;
                sidebar.scrollTop(height);
            }
        });
    </script> 

</body>
</html>
